---
title: "네트워크 계층"
excerpt: OSI 3계층

categories:
  - Network
tags:
  - [tag1, tag2]

permalink: /Network/network5

toc: true
toc_sticky: true

date: 2024-11-20
last_modified_at: 2024-11-20
---

## 네트워크 계층의 역할

### 네트워크 간의 연결 구조

서로 다른 네트워크에 있는 목적지로 데이터를 전송하기 위해 필요한 기술을 가지고 있다.<br/>

데이터링크 계층의 기능만으로는 해당 네트워크 안에서만 통신이 가능하다<br/>

네트워크 간의 통신을 가능하게 하는 것이 네트워크 계층의 역할
<br/>

#### 라우터
데이터의 목적지가 정해지면 **해당 목적지까지 어떤 경로로 가는 것이 좋은지**를 알려 주는 기능

#### IP 주소
어떤 네트워크의 커퓨터인지를 구분할 수 있도록 하는 주소</br>
IP 주소가 있으면 다른 네트워크에 있는 목적지를 지정 할 수 있다.

#### 라우팅
목적지 IP주소까지 데이터를 어떤 경로로 보낼지 결정하는 것.

### 라우터
라우팅을 하는 장비로 **라우팅 테이블**이 있어서 경로 정보를 등록하고 관리한다.

### IP
네트워크 계층에서는 캡슐화 할때 IP 헤더를 붙인다.<br/>

IP헤더는 버전, 헤더길이, 서비스 유형, 전체 패킷 길이, ID, 조각 상태, 조각의 위치, TTL, 프로토콜, 헤더 체크섬, **출발지 ip주소**, **목적지 ip 주소** 순으로 헤더가 구성되어 있다.

#### IP 패킷
IP 프로토콜을 사용하여 캡슐화할 때에는 데이터에 IP 헤더가 추가되는데, 이를 IP 패킷이라고 한다.

## IP 주소의 구조

### IP 주소
IP 주소는 인터넷 서비스 제공자(ISP)에게 받을 수 있다.<br/>
IPv4, IPv6이 있다.

#### IPv4
- 32비트로 구성, 약 43억 개

#### IPv6
- 128비트, 약 340간 개

IP주소는 공인 IP주소와 사설 IP주소가 있다.
- 공인 IP주소는 ISP가 제공
- IPv4 주소가 고갈되고 있기에 인터넷에 직접 연결되는 컴퓨터나 라우터에는 공인 IP주소를 할당
- 회사나 가정의 랜에 있는 컴퓨터는 사설 IP주소 할당

### MAC 주소와 IP 주소의 차이
- MAC 주소는 48비트로 구분하기 쉽게 16진수
- IP 주소는 32비트로 구분하기 쉽게 10진수

8비트를 옥텟이라고 부름, IP 주소는 4옥텟으로 구성
<br/>
IP주노는 네트워크 ID와 호스트 ID로 나뉘어져 있다.
네트워크 ID는 어떤 네트워크인지 나타내고 <br/>
호스트 ID는 해당 네트워크의 어느 컴퓨터인지를 나타낸다.

## IP 주소의 클래스 구조
### IP 주소 클래스
네트워크 크기를 클래스라는 개념으로 구분한다.

- A 클래스 : 대규모 네트워크 주소
  - 처음 8비트가 네트워크 ID
  - 1옥텟 범위 (1 ~ 127)
- B 클래스 : 중형 네트워크 주소
  - 처음 16비트가 네트워크 ID
  - 1옥텟 범위 (128 ~ 191)
- C 클래스 : 소규모 네트워크 주소
  - 처음 24비트가 네트워크 ID
  - 1옥텟 범위 (192 ~ 223)
- D 클래스 : 멀티캐스트 주소
- E 클래스 : 연구소 및 특수용도 주소

일반 네트에서는 A~C 클래스 사용

## 네트워크 주소와 브로드캐스트 주소의 구조
### IP 주소에는 네트워크 주소와 브로드캐스트 주소가 있다.

네트워크 주소와 브로드캐스트 주소는 특별한 주소로 컴퓨터나 라우터가 자신의 IP로 사용하면 안되는 주소 
<br/>
네트워크 주소
- 호스트 ID가 10진수로 0, 2진수로 00000000인 주소
- 전체 네트워크에서 작은 네트워크를 식별하는 데 사용, 호스트 ID가 10진수로 0이면 그 네트워크 전체를 대표하는 주소가 된다.

브로드캐스트 주소
- 호스트 ID가 10진수로 255, 2진수로 11111111인 주소
- 네트워크에 있는 컴퓨터나 장비 모두에게 한 번에 데이터를 전송하는데 사용되는 전용 IP주소

## 서브넷의 구조

### 서브넷
네트워크를 분할하는 것
<br/>
많은 수의 컴퓨터가 브로드캐스트 패킷을 전송하면 해당 네트워크의 모든 컴퓨터에 패킷이 전송되어 네트워크가 혼잡해 질 수 있음
<br/>
대규모 네트워크를 작은 네트워크로 분할하여 브로드캐스트로 전송되는 패킷의 범위를 좁힐 수 있다.
이렇게 하면 더 많은 네트워크를 만들 수 있어서 IP주소를 더 효과적으로 활용 가능
<br/>
네트워크를 분할하는 것을 서브넷팅
<br/>
분할된 네트워크를 서브넷이라고 한다.

>> 호스트 ID를 쪼개서 서브넷 ID에 할당

### 서브넷 마스크
서브넷팅 했을 때, 네트워크 ID와 호스트 ID를 식별하기 위한 값
- 프리픽스 표기법
  - 서브넷 마스크를 슬래시로 나타낸 것을 말한다. 
  - 255.255.255.0 -> /24 가 된다.
  - 네트워크 ID와 서브넷 ID에 할당한 비트를 모두 1로 계산하여 변환하면 서브넷 마스크 (ex) 255.255.255.240
  - 서브넷 마스크에서 네트워크 ID와 서브넷 ID에 할당된 비트 수 만큼 / 하면 프리픽스 표기법

## 라우터의 구조
라우터는 네트워크를 분리할 수 있다.
<br/>
라우터를 통해 다른 네트워크에 데이터를 전송하려면 라우터의 IP 주소를 서렂ㅇ해야한다.
<br/>

### 게이트웨이 
네트워크의 출입구를 설정하는 것
<br/>
콤퓨터는 다른 네트워크로 데이터를 보낼 때 어디로 전송하는지 알지 못한다
- 네트워크의 출입구를 지정하고 일단은 라우터로 데이터를 전송
- 추가로 라우팅이 필요하다

### 라우팅
경로 정보를 기반으로 현재의 네트워크에서 다른 네트워크로 최적의 경로를 통해 데이터를 전송
### 라우팅 테이블
경로 정보가 등록되어 있는 테이블
- 수동으로 등록하는 방법과 자동으로 등록하는 방법이 있음
- 자동의 경우 라우터 간에 경로 정보를 서로 교환하며 자동으로 수정이 이루어짐

### 라우팅 프로토콜
라우터 간에 라우팅 정보를 교환하기 위한 프로토콜
- RIP, OSPF, BGP 등이 있다.
