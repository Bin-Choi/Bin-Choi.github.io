---
title: "네트워크의 전체 흐름"
excerpt: OSI 모델의 전체 흐름에 대한 설명

categories:
  - Network
tags:
  - [tag1, tag2]

permalink: /Network/network8

toc: true
toc_sticky: true

date: 2024-12-14
---

## 랜 카드에서의 데이터 전달과 처리
웹 사이트에 방문했을 때 이루어지는 전체적인 데이터 처리 과정에 대해서 알아보자...

### 네트워크의 구성
OSI모델의 각 계층 간에 데이터가 전달되고 처리되는 전체 과정
- 응용 계층 : 애플리케이션 등에서 사용하는 데이터를 송수신하는 데 필요
- 전송 계층 : 목적지에 데이터를 정확하게 전달하는데 필요
- 네트워크 계층 : 다른 네트워크에 있는 목적지에 데이터를 전달하는 데 필요
- 데이터 링크 계층 : 랜에서 데이터를 송수신하는 데 필요
- 물리 계층 : 데이터를 전기 신호로 변환하는 데 필요

### 컴퓨터의 데이터가 전기 신호로 변환되는 과정
컴퓨터가 웹 브라우저에 URL을 입력하여 접속한다.
1. 응용 계층 : HTTP메세지 전송
2. 전송 계층 : TCP헤더 추가(출발지 포트 번호와 목적지 포트 번호) -> 세그먼트
3. 네트워크 계층 : 세그먼트에 IP헤더 추가(출발지 IP 주소와 목적지 IP 주소) -> IP 패킷
4. 데이터 링크 계층 : 이더넷 헤더 추가(MAC주소 등) -> 이더넷 프레임
5. 물리 계층 : 데이터가 전기 신호로 변환되어 네트워크로 전송

## 스위치와 라우터에서의 데이터 전달과 처리
스위치와 라우터에서 데이터가 처리되는 과정에 대해 알아보자...

### 스위치에서의 데이터 전달과 처리
스위치는 데이터 링크 계층에서 데이터를 전기 신호로 변환하여 라우터 A로 전송한다.
### 라우터에서의 데이터 전달과 처리
데이터는 스위치에서 라우터로 전기 신호로 전달된다.
라우터의 동작
- 데이터 링크 계층 : 이더넷 프레임의 목적지 MAC주소와 지신의 MAC주소를 비교하고 같으면 역캡슐화 수행 후 네트워크 계층에 전달
- 네트위크 계층 : 자신의 라우팅 테이블과 목적지 IP주소를 비교한다.
  - 라우팅 테이블에서 목적지 IP주소의 경로를 알 수 있으므로 라우팅을 할 수 있다.
    - 출발지의 IP주소를 라우터의 외부 IP주소로 변경하여 데이터 링크 계층으로 전달
캡슐화가 이루어 진 후 데이터는 전기 신호 형태로 다른 라우터로 전달된다.
<br/>
전기 신호로 변환되어 케이블을 통해 라우터 간 데이터가 전달되면 전달 받은 라우터는 이더넷 프레임의 목적지 MAC주소와 자신의 MAC주소를 비교...
- 라우팅 테이블을 확인 후, 내부 IP에서 처리하는 경우
  - 출발지 IP주소를 내부 IP주소로 변경, 데이터 링크 계층에 전달하여 스위치에 전달되도록 한다.
<br/>

## 웹 서버에서의 데이터 전달과 처리
웹 서버에서 이루어지는 데이터 처리 과정에 대해 알아보자...
### 웹 서버에서의 데이터 전달과 처리
데이터가 전기 신호로 웹 서버에 도착하면 웹 서버는 
1. 데이터 링크 계층: 이더넷 프레임의 목적지 MAC주소와 자신의 MAC주소를 비교, 주소가 같으면 이더넷 헤더와 트레일러를 분리하고 네트워크 계층에 전달
2. 네트워크 계층 : 목적지 IP주소와 서버의 IP주소가 같은지 확인 후, 같으면 IP 헤더를 분리 하고 전송 계층에 전달
3. 전송 계층 : 목적지 포트 번호를 확인하여 어떤 애플리케이션으로 전달해야 하는지 판단하고 TCP 헤더를 분리하여 응용 계층에 전달

> 정적 라우팅과 동적 라우팅
라우팅은 패킷을 목적지 컴퓨터까지 보낼 때 최적의 경로를 선택하여 전송하는 것을 뜻한다. 크게 정적 라우팅과 동적 라우팅으로 나뉜다.
- 정적 라우팅
정적 라우팅은 관리자가 미리 라우팅 테이블에 경로를 수동으로 추가하는 방법으로 목적지까지의 경로를 고정하거나 목적지까지의 경로가 하나로 한정되는 경우에 사용.<br/>
네트워크게 존재하는 모든 목적지 네트워크의 정보를 라우터에 알려줘야 하고, 관리자가 수동으로 설정해야 하므로 소규모 네트워크에서 사용
  장점
  - 라우팅 정보가 교환되지 않아 대역폭에 대한 부담이 적다.
  - 라우팅 정보가 네트워크로 전달되지 않으므로 보안을 유지하는 데 좋다.
  단점
  - 어떤 경로에 장애가 발생해도 다른 경로로 우회할 수 없다.   
  <br/>
- 동적 라우팅
네트워크 변경을 자동으로 감지하여 라우팅 테이블을 업데이트하거나 네트워크 자앵가 발생했을 때 라우팅 테이블을 업데이트하거나 네트워크 장애가 발생했을 때 라우터끼리 정보를 교환하여 최적의 경로로 전환<br/>
대규모 네트워크에서는 라우터에 많은 경로가 등록되기 때문에 동적 라우팅을 사용한다.






