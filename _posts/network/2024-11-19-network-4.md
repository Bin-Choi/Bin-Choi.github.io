---
title: "데이터 링크 계층"
excerpt: 랜에서 데이터 전송하기

categories:
  - Network
tags:
  - [tag1, tag2]

permalink: /Network/network4

toc: true
toc_sticky: true

date: 2024-11-19
last_modified_at: 2024-11-19
---

## 데이터 링크 계층의 역할과 이더넷

>랜에서 데이터를 주고받기 위해서 필요한 기술

데이터 링크 계층은 **네트워크 장비 간에 신호를 주고받는 규칙**을 정하는 계층 <br/>

### 이더넷
일반적으로 가장 많이 사용되는 규칙

#### CSMA/CD
- 데이터가 동시에 케이블을 지나가면 충돌이 발생
- 데이터를 보내는 시점을 늦추어 충돌이 일어나지 않는 구조
- CS는 데이터를 보내려고 하는 컴퓨터가 케이블에 신호가 흐르고 있는지를 확인한다.
- MA는 데이터가 흐르지 않는다면 데이터를 보내도 좋다.
- CD는 충돌이 발생하고 있는지를 확인한다.

```text
[정리]
- 이더넷은 랜에서 데이터를 정상으로 주고받기 위한 규칙
- 이더넷은 데이터 충돌을 막기 위한 규칙으로 CSMA/CD 방식을 사용
- CS는 송신 컴퓨터가 케이블에 데이터가 흐르는지 확인
- MA는 데이터가 흐르지 않는다면 보내는 규칙
- CD는 충돌이 발생하고 있는지 확인하는 규칙
```

## MAC 주소의 구조

### MAC 주소
랜 카드에 지정된 물리 주소로 전 세계에서 유일한 번호로 할당
<br/>
48비트 숫자로 구성, 앞 24비트는 제조사 번호, 뒤는 랜 카드의 일련번호

- OSI 모델의 데이터 링크 계층
- TCP/IP 모델의 네트워크 계층
에서 데이터에 이더넷 헤더와 트레일러를 붙인다.

#### 이더넷 헤더
목적지의 MAC주소(6바이트) + 출발지의 MAC주소 + 유형(2바이트), 총 14바이트로 구성됨

#### 이더넷 유형
이더넷으로 전송되는 상위 계층 프로토콜의 종류를 나타내는 16진수 번호

#### 트레일러
FCS(Frame Check Sequence)라고도 부르며, 데이터 전송 도중에 오류가 발생하는지 확인하는 용도로 사용

### 프레임
이더넷 헤더와 트레일러가 추가된 데이터를 프레임이라 한다.

### 역캡슐화
데이터링크 계층에서 프레임을 만들고 (캡슐화) 물리 계층에서 프레임을 전기 신호로 변환하여 전송한다.

이때 허브를 통해 목적지가 아닌 컴퓨터로도 모든 데이터가 송신된다.
각 컴퓨터들은 데이터를 역캡슐화 하여 목적지 MAC 주소와 자신의 MAC 주소가 일치한지 확인하고 다르다면 데이터를 파기한다.

## 스위치의 구조
스위치는 허브와 다르게 충돌이 발생하지 않는다. 왜그럴까??

### MAC 주소 테이블
스위치는 데이터 링크 계층에서 동작하고 레이어 2 스위치 혹은 스위칭 허브라고 불린다.
<br/>
스위치 내부에는 **MAC 주소 테이블** 이라는 것이 있다.

#### MAC 주소 테이블
스위치의 포트 번호와 해당 포트에 연결되어 있는 컴퓨터의 MAC 주소가 등록되는 데이터베이스

- 컴퓨터에서 목적지 MAC 주소가 추가된 프레임이라는 데이터가 전송되면 MAC 주소 테이블에 출발지 MAC 주소를 포트와 함께 등록한다. (MAC 주소 학습 기능) 

- 테이블에 목적지 MAC 주소가 등록 되어 있지 않다면 송신 포트를 제외한 모든 포트로 프레임이 전송 (플러딩)

- 테이블에 목적지 MAC 주소가 등록 되어 있다면 해당 포트로만 프레임을 전송 (필터링)

## 데이터가 케이블에서 충돌하지 않는 구조
### 전이중 통신과 반이중 통신

#### 전이중 통신
- 데이터의 송수신을 동시에 통신하는 방식
- 데이터를 동시에 전송해도 충돌이 일어나지 않는다.
- 컴퓨터 두 대를 직접 랜 케이블로 연결한다면 전이중 통신 방식이 된다. (크로스 케이블)
- 스위치 내부에는 송수신이 나누어져 있어 전이중 통신 방식으로 데이터를 주고받을 수 있다.

#### 반이중 통신
- 회선 하나로 송신과 수신을 번갈아가면서 통신하는 방식
- 데이터를 동시에 전송하면 충돌이 발생한다.
- 허브 내부에는 송수신이 나누어져 있지 않기 때문에 허브로 연결을 하면 반이중 통신 방식을 사용하게 된다.

> 이처럼 허브를 사용하면 충돌이 생기면서 네트워크 지연이 발생하기 때문에 네트워크 스위치를 사용하는 것이 대부분이다.

### 충돌 도메인
허브는 반이중 통신 방식으로 데이터를 동시에 전송하면 **충돌**이 일어난다. 충돌이 발생할 때 영향이 미치는 범위를 **충돌 도메인** 이라고 한다.

> 허브는 접속되어 있는 모든 컴퓨터가 충돌 도메인이 된다.
스위치는 충돌이 일어나지 않고, 충돌 도메인의 범위도 하나의 포트에 국한된다.

## 이더넷의 종류와 특징
### 이더넷 규격
케이블의 종류나 통신 속도에 따라 다양한 규격으로 분류.
<br/>
예시로 10BASE-T를 보자.
- 10 : 통신속도
- BASE : 전송 방식
- T : 케이블

T는 UTP 케이블을 의미, 100m 단위
T가 없으면 동축케이블로 동축케이블 뒤의 숫자는 길이(100m단위)<Br/>
예) 10BASE5 -> 10Mps 속도의 동축케이블, 최대 길이는 500m


